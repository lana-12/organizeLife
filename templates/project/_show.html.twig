{% extends 'base.html.twig' %}

{% block title %}
	{{project.name}}
{% endblock %}

{% block body %}
<div class="projetShow">
	<div class="container">
		<div class="row project-layout">
			<div class="col-12 col-lg-6">
				<section class="boxWhite boxProjectAdmin">
					<h2>
						<strong>{{ project.name }}</strong>
					</h2>
					<p class="description-truncate">Description :
						{{ project.description|slice(0, 30) ~ '...' }}</p>
					<p class="text-muted">Créer le
						{{project.createdAt | date("d/m/Y") }}</p>
					<div class="d-flex justify-content-end mb-5">
						<a href="{{ path('project.edit', {id: project.id , slug: project.slug }) }}" class="btn btn-warning me-3" title="Modifier le projet" alt="Modifier le projet">
							<i class="bi bi-pen"></i>
						</a>
						<button data-url="{{ path('project.delete', {id: project.id , slug: project.slug }) }}" class="btn btn-danger btnDeleteProject" title="Supprimer le projet" alt="Supprimer le projet">
							<i class="bi bi-trash"></i>
						</button>
					</div>
					<hr class="separator">
					<h3 class="my-3">Administrateur :</h3>
					<p>Prénom :
						{{ app.user.firstname }}</p>
					<p>Nom :
						{{ app.user.lastname }}</p>
					<p>Email :
						{{ app.user.email }}</p>
					<div class="d-flex justify-content-end mb-3">
						<a href="{{ path('admin.index') }}" class="btn btn-warning me-3" title="Modifier vos données Personnelles" alt="Modifier vos données Personnelles">
							<i class="bi bi-pen"></i>
						</a>
					</div>
				</section>
			</div>

			<div class="col-12 col-lg-6">
				<section class="boxWhite boxCollaborator">
					<div class="">
						<h4>Collaborateur :</h4>
					{% if totalCollaborators > 0 %}
							<div class="countersCollaborator">
								<span data-purecounter-start="150" data-purecounter-end="{{ totalCollaborators ?? 0 }}" data-purecounter-duration="1" class="purecounter"></span>
							</div>
					</div>
							<div>
								<a href="{{ path('collaborator.manage', {id: project.id }) }}" class="btn btn-success">Gérer</a>
							</div>
					{% else %}
						<p class="no-collaborators" data-url="{{ path('collaborator.new', {id: project.id}) }}">Aucun collaborateur pour ce projet.</p>
					</div>
					<div>
						<a href="{{ path('collaborator.new', {id: project.id}) }}" class="btn btn-dark">Ajouter</a>
					</div>

					{% endif %}		
				</section>

				<section class="boxWhite ">
					<h5 class="">Evènement :</h5>
					<a href="{{ path('calendar.index', {id: project.id }) }}" class="btn btn-primary me-2">Calendrier</a>
					<a href="{{ path('event.new', {id: project.id }) }}" class="btn btn-primary">Nouveau</a>
					{% if project.events is not empty %}
						{% for events in project.events %}
							<p>{{ events.title }}</p>
						{% endfor %}
					{% else %}
						<p>Aucun évènement pour ce projet.</p>
					{% endif %}
				</section>
			</div>
		</div>
	</div>
</div>
{% endblock %}