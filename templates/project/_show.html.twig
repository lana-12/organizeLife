{% extends 'base.html.twig' %}

{% block title %}
	{{project.name}}
{% endblock %}

{% block body %}
<div class="projetShow ">
	<div class="container">
		<section class="row ">
			<div class="col">
				<h2 class="titleCustom txtShadow">Gestion du Projet : {{ project.name }}</h2>
				{# {{ dump(app.request.attributes.get('_route') ) }} #}
			</div>
		</section>
		<div class="row ">
			<div class="col-12 col-lg-6 d-lg-flex ">
				<section class="boxWhite text-start ">
					<p class="description-truncate">Description : {{ project.description|slice(0, 100) ~ '...' }}</p>
					<p class="text-muted">Créer le
						{{project.createdAt | date("d/m/Y") }}</p>
					<div class="d-flex justify-content-center ">
						<a href="{{ path('project.edit', {id: project.id , slug: project.slug }) }}" class="btn btn-warning  me-3" alt="Modifier un projet ?" title="Modifier un projet ?"><i class="bi bi-pen"></i></a>
						<button data-url="{{ path('project.delete', {id: project.id , slug: project.slug }) }}" class="btn btn-danger btnDeleteProject" alt="Supprimer un projet ?" title="Supprimer un projet ?"><i class="bi bi-trash"></i></button>
					</div>
				</section>
			</div>
			<div class="col-12 col-lg-6 ">
				<section class="boxWhite text-start">
					<h3 class="mb-3">Administrateur :
					</h3>
					<p>Prénom : {{ app.user.firstname }}</p>
					<p>Nom : {{ app.user.lastname }}</p>
					<p>Email : {{ app.user.email }}</p>
				</section>
			</div>
		</div>
		<div class="row ">
			<div class="col-12 col-lg-6  ">
				<section class="boxWhite ">
					<div class="d-flex justify-content-between  mb-3">
						<h4 class="">Collaborateur :
						</h4>
						<a href="{{ path('collaborator.new', {'id': project.id}) }}" class="btn btn-dark ">Ajouter</a>
					</div>

					{% if totalCollaborators > 0 %}
					<div class="d-flex justify-content-between ">
						<div class="countersColl">
							<span data-purecounter-start="150" data-purecounter-end="{{ totalCollaborators ?? 0 }}" data-purecounter-duration="1" class="purecounter"></span>
						</div>						
						<a href="{{ path('collaborator.manage', {id: project.id }) }}" class="btn btn-success ">Gérer</a>
					</div>

					{% else %}
						<p class="no-collaborators" data-url="{{ path('collaborator.new', {'id': project.id}) }}">Aucun collaborateur pour ce projet.</p>
					{% endif %}
				</section>
			</div>
			<div class="col-12 col-lg-6  ">
				<section class="boxWhite">
					<h4 class="text-center">Evènement :
					</h4>
					<a href="{{ path('calendar', {id: project.id }) }}" class="btn btn-primary ">Calendrier</a>
					<a href="{{ path('event.new', {id: project.id }) }}" class="btn btn-primary ">Nouveau</a>
					{% if project.events is not empty %}
						{% for events in project.events %}
							<p>{{ events.title }}</p>
						{% endfor %}
					{% else %}
						<p>Aucun évènement pour ce projet.</p>
					{% endif %}
				</section>
			</div>
		</div>
	</div>
</div>
{# <div class="">
	{{ dump(project) }}
	{{ dump(app.current_route) }}
	{{ dump(app.request) }}

</div> #}
{% endblock %}

